<h1 id="anki-cozmo-kidnapping-using-monte-carlo-localization">Anki Cozmo Kidnapping using Monte Carlo Localization</h1>
<p>Members: Nick, Quan, Doug, and Brayton</p>
<p>Goal:</p>
<ul>
<li>Implement MCL with Anki Cozmo</li>
<li>Create Panorama of collected images from which the Cozmo bot can use to find its position and relocate itself.</li>
</ul>
<p><a href="https://data.bit-bots.de/cozmo_sdk_doc/cozmosdk.anki.com/docs/api.html">Cozmo API</a></p>
<p>Helpful <a href="https://github.com/nheidloff/visual-recognition-for-cozmo-with-tensorflow/blob/master/1-take-pictures/take-pictures.py">link</a> for taking pictures with cozmo and saving them.</p>
<hr>
<h2 id="table-of-contents">Table of Contents</h2>
<ol>
<li><a href="#setup">Setup</a><ol>
<li><a href="#computer-setup">Computer</a></li>
<li><a href="#mobile-phone-android-setup">Android phone</a></li>
</ol>
</li>
<li><a href="#tasks">Task</a></li>
<li><a href="#working-log">Working log</a></li>
</ol>
<hr>
<h2 id="setup">Setup</h2>
<h3 id="computer-setup">Computer Setup:</h3>
<ol>
<li>   Install Anki Cozmo SDK</li>
<li>   Enable/install Android Debug Bridge on Android device</li>
<li>   Setup environment (recommend using Anaconda): Python 3.8 + required packages in requirements.txt:<ul>
<li>Create environment:<pre><code class="language-bash">conda create -n envname python=3.8
</code></pre>
</li>
<li>Activate environment:<pre><code class="language-bash">conda activate envname
</code></pre>
</li>
<li>Install all required packages:<pre><code class="language-bash">pip install -r requirements.txt
</code></pre>
</li>
</ul>
</li>
</ol>
<h3 id="mobile-phone-android-setup">Mobile Phone (Android) Setup:</h3>
<ol>
<li>   Enable USB debugging on Android device</li>
<li>   Install Official Cozmo app on phone</li>
<li>   Run USB cable from phone to computer</li>
<li>Run <code>adb devices</code> on CommandPrompt on computer to check and authorize your phone</li>
<li>   Open Cozmo app and turn Cozmo bot on </li>
<li>   Connect to Cozmo bot’s wifi network.</li>
<li>   Enable SDK on Cozmo app</li>
</ol>
<hr>
<h2 id="tasks">Tasks</h2>
<ul>
<li><input disabled="" type="checkbox"> Get robot to turn to location it has highest belief prob after MCL done</li>
<li><input disabled="" type="checkbox"> Change all read imgs to get 3D imgs (3 channels) -&gt; modify convolution+pool functions (Quan)</li>
<li><input disabled="" type="checkbox"> Polish borrowed code: make more succint, use methods we have already coded.  </li>
<li><input disabled="" type="checkbox"> Read MCL slides + Java demo code (convert to python) (Bray &amp; Doug)</li>
<li><input disabled="" type="checkbox"> Try running MCL w/ pano</li>
<li><input disabled="" type="checkbox"> Future:<ul>
<li>How to improve accuracy</li>
<li>How to make it works in dark environment (may use edge detection??)</li>
<li>How to localize with just 4 images (0, 90, 180, 270 degrees) (divide imgs into $n$ cols then compare w/ $n$ cols of each img for all $m$ ims?)</li>
</ul>
</li>
<li><input checked="" disabled="" type="checkbox"> How to rotate robot</li>
<li><input checked="" disabled="" type="checkbox"> How to get image from cozmo’s camera (file <code>picture-collection.py</code>)</li>
<li><input checked="" disabled="" type="checkbox"> Fix MCL code for images (check <a href="https://www.youtube.com/watch?v=JhkxtSn9eo8">Youtube</a> and github) (file <code>my-MCL.py</code>)</li>
<li><input checked="" disabled="" type="checkbox"> Create a panorama (optional)<ul>
<li>Check openCV Stitching (e.g from prev group: <a href="http://cs.gettysburg.edu/~tneller/archive/cs371/cozmo/22sp/fuller/Stitching.py">L.Attai,R.Fuller,C.Rhodes</a>)</li>
</ul>
</li>
<li><input checked="" disabled="" type="checkbox"> Crop pano img + sensor img in MCL algo (Nick)</li>
<li><input checked="" disabled="" type="checkbox"> Recreate MCL as per supplied examples (based on <a href="http://cs.gettysburg.edu/~tneller/archive/cs371/cozmo/22sp/fuller/MCLocalize.py">L.Attai,R.Fuller,C.Rhodes</a>))</li>
</ul>
<hr>
<p>Files and Dirs</p>
<ul>
<li>data: data collected from MCL, used to create * Histogram: histogram of probs from MCL</li>
<li>cozmo_MCL.py: New MCL implementation, based on previous group&#39;s work</li>
<li>img_processing.py:<ul>
<li>get imgs func</li>
<li>process imgs</li>
<li>save imgs:</li>
</ul>
</li>
<li>pic_collection.py:<ul>
<li>collection of pictures for pano</li>
<li>taking of single image for MCL</li>
</ul>
</li>
<li>MCL_old.py: old MCL (not true MCL -&gt; not accurate)</li>
<li>cozmo-images-kidnap: images for kidnap problem (collected data)</li>
<li>cozmo-imgs-data1: data for remote work</li>
</ul>
<hr>
<h2 id="working-log">Working log</h2>
<table>
<thead>
<tr>
<th align="left">Data/Time</th>
<th align="left">Activity</th>
<th align="right">Member</th>
</tr>
</thead>
<tbody><tr>
<td align="left">3/17: 1-2pm</td>
<td align="left">Setup Project</td>
<td align="right">Brayton &amp; Nick</td>
</tr>
<tr>
<td align="left">3/23: 4:15-5:15pm</td>
<td align="left">Setup Project &amp; Doc of steps</td>
<td align="right">Doug &amp; Nick</td>
</tr>
<tr>
<td align="left">3/24: 1-5pm</td>
<td align="left">Connect to Cozmo, implement basic MCL &amp; pic collection</td>
<td align="right">Doug, Quan &amp; Nick</td>
</tr>
<tr>
<td align="left">3/29: 2-5pm</td>
<td align="left">MCL, refine code for pic collection</td>
<td align="right">Doug, Quan &amp; Nick</td>
</tr>
<tr>
<td align="left">3/31: 2-4:45pm</td>
<td align="left">Done take1Pic, kidnap</td>
<td align="right">Doug, Quan &amp; Nick</td>
</tr>
<tr>
<td align="left">3/31: 5:15-6:30pm</td>
<td align="left">Modify and fix bug in MCL</td>
<td align="right">Quan</td>
</tr>
<tr>
<td align="left">4/1: 1-1:50am</td>
<td align="left">Add MSE+Cos_Similar, try MCL, bad result --&gt; suggest creating pano</td>
<td align="right">Quan</td>
</tr>
<tr>
<td align="left">4/5: 3:30-5:30pm</td>
<td align="left">Image stiching for creation of pano</td>
<td align="right">Quan &amp; Nick</td>
</tr>
<tr>
<td align="left">4/7: 1:20-3:30pm</td>
<td align="left">Image cropping, MCL redo</td>
<td align="right">Nick, Quan, Brayton</td>
</tr>
<tr>
<td align="left">4/7: 3:30-4:30 pm</td>
<td align="left">MCL redo</td>
<td align="right">Nick, Quan</td>
</tr>
<tr>
<td align="left">4/12: 2:20-4:50pm</td>
<td align="left">Working on new MCL based on previous group efforts</td>
<td align="right">Nick</td>
</tr>
<tr>
<td align="left">4/12: 7:00-7:50pm</td>
<td align="left">MCL debugging</td>
<td align="right">Nick</td>
</tr>
<tr>
<td align="left">4/14: 1:00-2:30PM</td>
<td align="left">MCL testing/debugging</td>
<td align="right">Brayton</td>
</tr>
<tr>
<td align="left">4/14: 1:00-5:20PM</td>
<td align="left">MCL testing/debugging</td>
<td align="right">Nick</td>
</tr>
<tr>
<td align="left">4/16: 9:20-10:00PM</td>
<td align="left">Make Cozmo relocalize after MCL</td>
<td align="right">Nick</td>
</tr>
<tr>
<td align="left">4/16: 2:00-4:30PM</td>
<td align="left">Make Cozmo relocalize after MCL</td>
<td align="right">Nick</td>
</tr>
<tr>
<td align="left">4/16: 2:00-4:30PM</td>
<td align="left">Make Cozmo relocalize after MCL</td>
<td align="right">Nick</td>
</tr>
<tr>
<td align="left">4/21: 1:00-2:30PM</td>
<td align="left">Cozmo localization tuning, website with documentation</td>
<td align="right">Nick, Doug, Brayton</td>
</tr>
<tr>
<td align="left">4/21: 2:30-5PM</td>
<td align="left">Cozmo localization tuning, bins for histogram</td>
<td align="right">Nick</td>
</tr>
</tbody></table>
